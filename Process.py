import socket
import struct

if __name__ == '__main__':
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.bind(('172.28.85.248', 8080))

    # 用户选择要发送的数据包
    choice = input("Please select（1: unlocked, 2: takeoff, 3: land, 4: unlocked and takeoff）: ")
    # unlocked
    a1 = [0xfd,0x20,0x00,0x00,0xc9,0xff,0xbe,0x4c,0x00,0x00,0x00,0x00,
          0x80,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x01,0x01,0x01,0xf4,0x3c]
    pack1 = struct.pack("%dB" % len(a1), *a1)
    # takeoff
    a2 = [0xfd,0x20,0x00,0x00,0x60,0xff,0xbe,0x4c,0x00,0x00,0x00,0x00,
          0x80,0xbf,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x7f,0x00,0x00,0xc0,0x7f,0x00,0x00,0xc0,0x7f,0x9a,0x9d,0x05,0x43,0x16,0x00,0x01,0x01,0xcb,0x2d]
    pack2 = struct.pack("%dB" % len(a2), *a2)
    # land
    # a3 = [0xfe, 0x06, 0xef, 0xff, 0xbe, 0x0b, 0x00, 0x00, 0x04, 0x06, 0x01, 0x9d, 0x76, 0xf3]
    a3 = [0xfd, 0x06, 0x00, 0x00, 0xc5, 0xff, 0xbe, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x04, 0x06, 0x01, 0x9d, 0x2d, 0x9a]
    pack3 = struct.pack("%dB" % len(a3), *a3)

    if choice == '1':
        # unlocked
        for i in range(1, 100):
            s.sendto(pack1, ('172.28.85.253', 18570))
    elif choice == '2':
        # takeoff
        for i in range(1, 100):
            s.sendto(pack2, ('172.28.85.253', 18570))
    elif choice == '3':
        # land
        for i in range(1, 100):
            s.sendto(pack3, ('172.28.85.253', 18570))
    elif choice == '4':
        # unlocked and takeoff
        for i in range(1, 100):
            s.sendto(pack1, ('172.28.85.253', 18570))
            s.sendto(pack2, ('172.28.85.253', 18570))
    else:
        print("Please choose again")

    s.close()
